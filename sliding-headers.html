<!DOCTYPE html>
<html>
<head>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Sliding Headers Prototype</title>
    <style>

        html,
        body {
            margin: 0;
            padding: 0;
        }


        .calendar {
            overflow-x: scroll;
            overflow-y: hidden;
            white-space: nowrap;
            font-size: 0;
        }

        .month {
            background: none repeat scroll 0 0 orange;
            display: inline-block;
            position: relative;
            font-size: 16px;
            outline: 1px dotted brown;
            outline-width: 0 1px;
        }

        .month > ol {
            margin-top: 40px;
            padding: 0;
        }

        .day {
            width: 200px;
            margin: 0 20px;
            display: inline-block;
            list-style: none outside none;
            position: relative;
            background: pink;
            vertical-align: top;
        }

        .month > .name {
            margin: 0;
            position: absolute;
            top: 0;
            padding:0 20px;
            color: Chocolate;
            transition: color 0.5s 0s;
        }

        .month.middle > .name {
            left: 550px;
            position: fixed;
            /*top: 0;*/
            color: black;
        }

        .month.begining > .name {
            position: absolute;
            right: auto;
            left: 0;
            /*left: 20px;*/
        }

        .month > .name,
        .month.end > .name {
            position: absolute;
            right: 0;
            /*right: 20px;*/
            left: auto;
        }


        .day time,
        .day .events {
            width: 200px;
        }

        .day time {
            position: relative;
            display: block;
            height: 200px;
            background: ivory;
        }

        .day .events {
            position: relative; /*TODO*//*do i need this?*/
        }


        #scrimmage {
            position: fixed;
            top: 0;
            left: 550px;
            width: 0;
            height: 100%;
            border-left: 1px solid purple;
            z-index: 1;
        }

    </style>
</head>
<body class="">
    <div class="calendar">
        <div id="scrimmage"></div>
        <!-- TODO: add section.year and section.year time .name -->
        <!-- TODO: maybe add the computer-readable time -->
        <section class="month march">
            <h1 class="name">March</h1>
            <ol id="events" start="">
                <li class="day wednesday">
                    <time>
                        <span class="name">Wednesday</span>
                        <span class="date">20</span>
                    </time>
                    <ol class="events">
                        <li class="">neat</li>
                    </ol>
                </li>
                <li class="day thursday current">
                    <time>
                        <span class="name">Thursday</span>
                        <span class="date">21</span>
                    </time>
                    <ol class="events">
                        <li class="">hi there</li>
                        <li class="">neat</li>
                        <li class="add">+</li>
                    </ol>
                </li>
                <li class="day friday">
                    <time>
                        <span class="name">Friday</span>
                        <span class="date">22</span>
                    </time>
                    <ol class="events">
                        <li class="add">+</li>
                    </ol>
                </li>
                <li class="day saturday">
                    <time>
                        <span class="name">Friday</span>
                        <span class="date">22</span>
                    </time>
                    <ol class="events">
                        <li class="add">+</li>
                    </ol>
                </li>
                <li class="day sunday">
                    <time>
                        <span class="name">Friday</span>
                        <span class="date">22</span>
                    </time>
                    <ol class="events">
                        <li class="add">+</li>
                    </ol>
                </li>
            </ol>
        </section>

        <section class="month april">
            <h1 class="name">April</h1>
            <ol id="events" start="">
                <li class="day wednesday">
                    <time>
                        <span class="name">Wednesday</span>
                        <span class="date">20</span>
                    </time>
                    <ol class="events">
                        <li class="">neat</li>
                    </ol>
                </li>
                <li class="day thursday current">
                    <time>
                        <span class="name">Thursday</span>
                        <span class="date">21</span>
                    </time>
                    <ol class="events">
                        <li class="">hi there</li>
                        <li class="">neat</li>
                        <li class="add">+</li>
                    </ol>
                </li>
                <li class="day friday">
                    <time>
                        <span class="name">Friday</span>
                        <span class="date">22</span>
                    </time>
                    <ol class="events">
                        <li class="add">+</li>
                    </ol>
                </li>
                <li class="day saturday">
                    <time>
                        <span class="name">Friday</span>
                        <span class="date">22</span>
                    </time>
                    <ol class="events">
                        <li class="add">+</li>
                    </ol>
                </li>
                <li class="day sunday">
                    <time>
                        <span class="name">Friday</span>
                        <span class="date">22</span>
                    </time>
                    <ol class="events">
                        <li class="add">+</li>
                    </ol>
                </li>
            </ol>
        </section>

        <section class="month may">
            <h1 class="name">May</h1>
            <ol id="events" start="">
                <li class="day wednesday">
                    <time>
                        <span class="name">Wednesday</span>
                        <span class="date">20</span>
                    </time>
                    <ol class="events">
                        <li class="">neat</li>
                    </ol>
                </li>
                <li class="day thursday current">
                    <time>
                        <span class="name">Thursday</span>
                        <span class="date">21</span>
                    </time>
                    <ol class="events">
                        <li class="">hi there</li>
                        <li class="">neat</li>
                        <li class="add">+</li>
                    </ol>
                </li>
                <li class="day friday">
                    <time>
                        <span class="name">Friday</span>
                        <span class="date">22</span>
                    </time>
                    <ol class="events">
                        <li class="add">+</li>
                    </ol>
                </li>
                <li class="day saturday">
                    <time>
                        <span class="name">Friday</span>
                        <span class="date">22</span>
                    </time>
                    <ol class="events">
                        <li class="add">+</li>
                    </ol>
                </li>
                <li class="day sunday">
                    <time>
                        <span class="name">Friday</span>
                        <span class="date">22</span>
                    </time>
                    <ol class="events">
                        <li class="add">+</li>
                    </ol>
                </li>
            </ol>
        </section>

        <section class="month june">
            <h1 class="name">June</h1>
            <ol id="events" start="">
                <li class="day wednesday">
                    <time>
                        <span class="name">Wednesday</span>
                        <span class="date">20</span>
                    </time>
                    <ol class="events">
                        <li class="">neat</li>
                    </ol>
                </li>
                <li class="day thursday current">
                    <time>
                        <span class="name">Thursday</span>
                        <span class="date">21</span>
                    </time>
                    <ol class="events">
                        <li class="">hi there</li>
                        <li class="">neat</li>
                        <li class="add">+</li>
                    </ol>
                </li>
                <li class="day friday">
                    <time>
                        <span class="name">Friday</span>
                        <span class="date">22</span>
                    </time>
                    <ol class="events">
                        <li class="add">+</li>
                    </ol>
                </li>
                <li class="day saturday">
                    <time>
                        <span class="name">Friday</span>
                        <span class="date">22</span>
                    </time>
                    <ol class="events">
                        <li class="add">+</li>
                    </ol>
                </li>
                <li class="day sunday">
                    <time>
                        <span class="name">Friday</span>
                        <span class="date">22</span>
                    </time>
                    <ol class="events">
                        <li class="add">+</li>
                    </ol>
                </li>
            </ol>
        </section>

        <div id="results">

        </div>
    </div>
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script>
            $(document).ready(function(){

                var months = $('.month');// will need to be updated every time I load more days into the calendar.
                var scrimmage = 550;
                var zeroLine = scrimmage;
                var beforeZero;
                var afterZero;


                var monthslefts = [];
                var monthsNamesRights = [];
                $.each(months, function(i, item) {
                    // such awful naming..
                    // var left = $(item).offset();
                    var currentItem = $(item);
                    // var left = $(item).position();
                    var left = currentItem.position();
                        left = left.left;
                    // if(left > zeroLine) {
                        // beforeZero = i - 1;
                        // afterZero  = i;
                        // return false;// break out
                    // }
                    // monthslefts[monthslefts.length] = left;
                    // monthsNamesRights[monthsNamesRights.length] =  monthBeforeZero.find('> .name').outerWidth();
                    monthslefts[i] = left;
                    monthsNamesRights[i] =  currentItem.find('> .name').outerWidth();
                    console.log('current name:  ', currentItem.find('> .name').text());
                    console.log('current width: ', currentItem.find('> .name').outerWidth());
                });

                console.log('monthslefts: ', monthslefts);

                // var loadedMonths = [];
                // do just store the left position on the elem til i get a better js spot ready?



                var calendar = $('.calendar');
                calendar.scroll(function(){


                    var scrollLeft = calendar.scrollLeft();
                    // console.log('calendar.scrollLeft: ', calendar.scrollLeft() );
                    var scrollZero = scrollLeft + zeroLine;
                    for(var i=0, l=monthslefts.length; i < l; i++) {
                        if( monthslefts[i] > scrollZero ) {
                            // console.log('monthslefts['+i+'] is the first afterZero');
                            beforeZero = i-1;
                            afterZero  = i;
                            break;
                        }
                    }

                    //TODO: only do this work if the beforeZero changes value;

                    months.removeClass('begining middle end');

                    var monthBeforeZero = $(months[beforeZero]);
                    var monthAftreZero  = $(months[afterZero]);
                    // var monthBeforeZeroRight = monthBeforeZero.find('> .name').outerWidth();
                    // console.log('old: ', monthBeforeZeroRight);
                    var monthBeforeZeroRight = monthsNamesRights[beforeZero];
                    console.log('new: ', monthBeforeZeroRight);

                    if(monthslefts[afterZero] - monthBeforeZeroRight < scrollZero) {
                        monthBeforeZero.addClass('end');
                    }else{
                        monthBeforeZero.addClass('middle');
                    }

                    monthAftreZero.addClass('begining');








                });

                $('.calendar').scrollLeft(1).scrollLeft(0);

            });
    </script>

</body>
</html>
